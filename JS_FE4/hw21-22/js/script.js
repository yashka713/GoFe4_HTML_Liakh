$(document).ready(function () {    let tmpl = _.template($('#base-template').html());    $('.wrapper').html(tmpl(database));    let $appendModal = $('<div class="modal-window">');    let tempBase = localStorage.getItem('dataBank');    let base= JSON.parse(tempBase);    $('input[type="checkbox"]').on('click', function(){        $(this).closest('.question-block').find('input[type="checkbox"]').prop("checked", false);        $(this).prop("checked", true);    });    $('.button-checked').on('click', function(){        let arrAnswerType = [];        let kinestetik = 0;        let audial = 0;        let visual = 0;        let discrete = 0;        let res;        let $chkBox = $('input[type="checkbox"]:checked');        let userNickName = $('.user-name-input').val()|| 'user_NoName';        for (let k=0; k < $chkBox.length; k++){            let chkID = $chkBox.eq(k).attr('id');            chkID = chkID.substr(chkID.indexOf('_')+1);            let i = +chkID.substr(0,chkID.indexOf('_'));            let j = +chkID.substr(chkID.indexOf('_')+1);            if     (base.questions[i].answer[j].individualType == 'kinestetik') kinestetik++;            else if(base.questions[i].answer[j].individualType == 'audial') audial++;            else if(base.questions[i].answer[j].individualType == 'visual') visual++;            else if(base.questions[i].answer[j].individualType == 'discrete') discrete++;        }        arrAnswerType = [userNickName, kinestetik, audial, visual, discrete];        if ((kinestetik + audial + visual + discrete) < 6){            alert("Ответьте, пожалуйста, на все тесты!");            $('input[type="checkbox"]').prop("checked", false);        }        let temp = JSON.stringify(arrAnswerType);        localStorage.setItem(userNickName ,temp);        $('input[type="checkbox"]').prop("checked", false);        $('body').append($appendModal);        if((kinestetik > audial)&&(kinestetik > visual)&&(kinestetik > discrete)) res = description.kinestetik;        else if((audial > visual)&&(audial > discrete)) res = description.audial;        else if(visual > discrete) res = description.visual;        else res = description.discrete;        $('.modal-window').append('<p class="paragraph">' + res + '</p>');    });    $appendModal.on('click', function(){        $appendModal.hide();    });});